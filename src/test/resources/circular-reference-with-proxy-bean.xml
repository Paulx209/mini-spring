<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">

<!--    a被代理-->
    <bean id="a" class="com.sonicge.beans.factory.bean.A">
        <property name="b" ref="b"/>
    </bean>

    <bean id="b" class="com.sonicge.beans.factory.bean.B">
        <property name="a" ref="a"/>
    </bean>

    <bean id="defaultAdvisorAutoProxyCreator" class="com.sonicge.aop.autoProxy.DefaultAdvisorAutoProxyCreator"/>

<!--    增强advice-->
    <bean id="beforeAdvice" class="com.sonicge.beans.factory.common.ABeforeAdvice"/>

<!--    genericInterceptor实现了MethodInterceptor接口，调用反射方法就会调用里面的invoke方法-->
    <bean id="genericInterceptor" class="com.sonicge.aop.GenericInterceptor">
        <property name="beforeAdvice" ref="beforeAdvice"/>
    </bean>

    <bean id="pointcutAdvisor" class="com.sonicge.aop.aspectj.AspectJExpressionPointcutAdvisor">
        <property name="advice" ref="genericInterceptor"/>
        <property name="expression" value="execution(* com.sonicge.beans.factory.bean.A.*(..))"/>
    </bean>



 </beans>
